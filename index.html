<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ôº≥ÔºÜÔº≠„ÇΩ„É™„ÉÜ„Ç£„Ç¢ ver2.8</title>
    <link rel="stylesheet" href="style-base.css">
    <link rel="stylesheet" href="style-board.css">
    <link rel="stylesheet" href="style-controls.css">
    <link rel="stylesheet" href="style-drawers.css">
    <link rel="stylesheet" href="style-modals.css">
    <link rel="stylesheet" href="style-themes.css">
    <link rel="stylesheet" href="style-effects.css">
</head>
<body>
    
    <div id="playmat-background"></div>

    <div class="main-container"> 
        
        <div class="common-preview-wrapper"> 
            
            <div class="counter-wrapper" id="opponent-counter-wrapper">
                <div class="player-info-group" id="opponent-player-info-group">
                    <div class="player-icon-slot opponent-text-flip">
                        <div class="card-slot" id="opponent-icon-zone"></div>
                    </div>
                    <input type="text" id="opponent-player-name" class="player-name-input opponent-text-flip" value="Opponent">
                </div>
                
                <div class="player-stats-group" id="opponent-player-stats-group">
                    <div class="hand-counter-group" id="opponent-lp-counter-group">
                        <span class="area-label opponent-text-flip">LP</span>
                        <div class="counter-buttons simple-counter-buttons">
                            <button class="counter-btn" data-value="-1">‚ñº</button>
                            <input type="number" id="opponent-counter-value" class="lp-counter-input" value="30" min="0"> 
                            <button class="counter-btn" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                    <div class="hand-counter-group" id="opponent-mana-counter-group">
                        <span class="area-label opponent-text-flip">„Éû„Éä</span>
                        <div class="counter-buttons simple-counter-buttons">
                            <button class="counter-btn" data-value="-1">‚ñº</button>
                            <input type="number" id="opponent-mana-counter-value" class="mana-counter-input" value="0" min="0">
                            <button class="counter-btn" id="opponent-mana-btn-plus" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                    <div class="hand-counter-group" id="opponent-hyphen-counter-group">
                        <input type="text" class="area-label header-input opponent-text-flip" value="-" maxlength="5">
                        <div class="counter-buttons simple-counter-buttons">
                            <button class="counter-btn" data-value="-1">‚ñº</button>
                            <div contenteditable="true" id="opponent-hyphen-counter-value" class="hyphen-counter-input">0</div>
                            <button class="counter-btn" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card-preview-area" id="common-card-preview">
                <div class="preview-image-wrapper" id="preview-image-container">
                    <p>„Ç´„Éº„Éâ„Å´„Ç´„Éº„ÇΩ„É´„ÇíÂêà„Çè„Åõ„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>

                <div class="preview-info-wrapper" id="preview-info-container">
                    <div class="preview-top-group">
                        <div class="preview-stat-group-left">
                            <span class="preview-stat" id="preview-attribute">Â±ûÊÄß: -</span>
                            <span class="preview-stat" id="preview-cost">„Éû„Éä: -</span>
                        </div>
                        <div class="preview-stat-group-right">
                            <div class="preview-text-block" id="preview-flavor-text"></div>
                            <span class="preview-stat" id="preview-top-right-stat">BP: -</span>
                        </div>
                    </div>

                    <div class="preview-bottom-group">
                        <div class="preview-text-block" id="preview-effect-text"></div>
                        <div class="preview-name" id="preview-card-name">-</div>
                    </div>
                </div>
            </div>
            
            <div class="counter-wrapper" id="player-counter-wrapper">
                <div class="player-info-group" id="player-info-group">
                    <div class="player-icon-slot">
                        <div class="card-slot" id="icon-zone"></div>
                    </div>
                    <input type="text" id="player-name" class="player-name-input" value="Player">
                </div>
                
                <div class="player-stats-group" id="player-stats-group">
                    <div class="hand-counter-group" id="lp-counter-group">
                        <span class="area-label">LP</span>
                        <div class="counter-buttons simple-counter-buttons">
                            <button class="counter-btn" data-value="-1">‚ñº</button>
                            <input type="number" id="counter-value" class="lp-counter-input" value="30" min="0"> 
                            <button class="counter-btn" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                    <div class="hand-counter-group" id="mana-counter-group">
                        <span class="area-label">„Éû„Éä</span>
                        <div class="counter-buttons simple-counter-buttons">
                            <button class="counter-btn" data-value="-1">‚ñº</button>
                            <input type="number" id="mana-counter-value" class="mana-counter-input" value="0" min="0">
                            <button class="counter-btn" id="mana-btn-plus" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                    <div class="hand-counter-group" id="hyphen-counter-group">
                        <input type="text" class="area-label header-input" value="-" maxlength="5">
                        <div class="counter-buttons simple-counter-buttons">
                             <button class="counter-btn" data-value="-1">‚ñº</button>
                             <div contenteditable="true" id="hyphen-counter-value" class="hyphen-counter-input">0</div>
                             <button class="counter-btn" data-value="1">‚ñ≤</button>
                        </div>
                    </div>
                </div>
            </div>

        </div> 
        
        <div class="game-area-container">

            <div class="opponent-wrapper">
                <div class="board-and-hand-wrapper" id="opponent-board-and-hand-wrapper">
                    <div class="game-board" id="opponent-game-board">
                        <div class="zone mana-zone" id="opponent-mana-left">
                            <div class="zone-header opponent-text-flip">„Éû„Éä„Ç®„É™„Ç¢1</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone grave-zone" id="opponent-grave">
                            <div class="zone-header opponent-text-flip">Â¢ìÂú∞„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone special-zone-1" id="opponent-special1">
                            <div class="zone-header opponent-text-flip">ÁâπÊÆä„Ç®„É™„Ç¢1</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone battle-zone" id="opponent-battle">
                            <div class="zone-header opponent-text-flip">„Éê„Éà„É´„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone spell-zone" id="opponent-spell">
                            <div class="zone-header opponent-text-flip">„Çπ„Éö„É´„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone special-zone-2" id="opponent-special2">
                            <div class="zone-header opponent-text-flip">ÁâπÊÆä„Ç®„É™„Ç¢2</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone exclude-zone" id="opponent-exclude">
                            <div class="zone-header opponent-text-flip">Èô§Â§ñ„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone mana-zone" id="opponent-mana-right">
                            <div class="zone-header opponent-text-flip">„Éû„Éä„Ç®„É™„Ç¢2</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hand-area-container" id="opponent-hand-area-container">
                        <div class="hand-controls-top-wrapper" id="opponent-hand-controls-top-wrapper">
                            
                            <div class="extra-area-wrapper">
                                <input type="text" class="extra-header-input" placeholder="„Çπ„ÉÜ„Éº„Çø„Çπ">
                                <div class="extra-grid">
                                    <div class="extra-column">
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                    </div>
                                    <div class="extra-column">
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="zone extra-image-zone" id="opponent-extra-image-zone">
                                <div class="zone-header opponent-text-flip">„Éï„Ç£„Éº„É´„Éâ„Ç®„É™„Ç¢</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>

                            <div class="zone deck-zone side-deck-zone" id="opponent-side-deck">
                                <div class="zone-header opponent-text-flip">EX„Éá„ÉÉ„Ç≠</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>
                            <div class="hand-controls-frame" id="opponent-hand-controls-frame">
                                <div class="hand-zone-wrapper" id="opponent-hand-zone-wrapper">
                                    <div class="zone-header opponent-text-flip">ÊâãÊú≠</div>
                                    <div class="hand-zone-slots" id="opponent-hand-zone">
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                    </div>
                                </div>
                            
                                <div class="hand-buttons" id="opponent-hand-buttons"> 
                                    <button class="draw-btn" id="opponent-draw-card">1„Éâ„É≠„Éº</button>
                                    <button class="draw-btn" id="opponent-draw-5-card">5„Éâ„É≠„Éº</button> 
                                    <button class="draw-btn" id="opponent-sm-toggle-btn" data-mode="simple">„Ç∑„É≥„Éó„É´</button>
                                    <button class="draw-btn" id="opponent-system-btn">„Ç∑„Çπ„ÉÜ„É†</button>
                                    <button class="draw-btn" id="opponent-surrender-btn">ÈôçÂèÇ</button>
                                </div>
                            </div>
                            
                            <div class="zone deck-zone" id="opponent-deck">
                                <div class="zone-header opponent-text-flip">„Éá„ÉÉ„Ç≠</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>

                            <div class="shortcut-guide action-log-embedded fixed-orientation">
                                <div class="guide-title" style="display: flex; justify-content: center; align-items: center; position: relative;">
                                    „Ç¢„ÇØ„Ç∑„Éß„É≥„É≠„Ç∞
                                    <button id="download-log-btn" style="position: absolute; right: 2px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #a0a0e0; font-size: 1.1em; padding: 0; line-height: 1;" title="„É≠„Ç∞‰øùÂ≠ò">üíæ</button>
                                </div>
                                <div id="action-log-body" class="action-log-body-embedded"></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            
            <div class="center-controls-wrapper">
                
                <div id="timer-group-wrapper" style="display: flex; align-items: stretch; margin-right: 10px; border: 2px solid #555; border-radius: 5px; overflow: hidden; background-color: #333;">
                    <button id="timer-pause-btn" class="step-btn" style="border: none; border-radius: 0; min-width: 30px; padding: 0 10px; background-color: #444; color: #fff; font-size: 1.2em; cursor: pointer;" title="‰∏ÄÊôÇÂÅúÊ≠¢/ÂÜçÈñã">‚ñ∂</button>
                    <div id="turn-timer-container" style="display: flex; align-items: center; padding: 2px 8px; background-color: #333; color: #fff; border-left: 1px solid #555;">
                        <span style="font-size: 0.8em; margin-right: 5px;">Time:</span>
                        <span id="turn-timer-display" style="font-weight: bold; font-size: 1.1em;">180</span>
                    </div>
                </div>

                <button class="drawer-toggle" id="common-drawer-toggle">ÂÖ±ÈÄö„É°„Éã„É•„Éº</button>

                <div class="common-turn-counter" id="common-turn-counter">
                    <div class="turn-display-group">
                        <select class="turn-select" id="turn-player-select">
                            <option value="first">ÂÖàË°å</option>
                            <option value="second">ÂæåÊîª</option>
                        </select>
                        <input type="number" class="turn-input" id="common-turn-value" value="1" min="1">
                        <span class="turn-label">„Çø„Éº„É≥ÁõÆ</span>
                    </div>
                    <div class="turn-controls">
                        <button class="turn-btn" id="common-turn-prev" data-value="-1">‚óÄ</button>
                        <button class="turn-btn" id="common-turn-next" data-value="1">‚ñ∂</button>
                    </div>
                </div>

                <button class="draw-btn" id="duel-start-btn">„Éá„É•„Ç®„É´ÈñãÂßã</button>

                <div class="step-navigation">
                    <button class="step-btn active" id="step-start">‚ë†„Çø„Éº„É≥ÈñãÂßã</button>
                    <button class="step-btn" id="step-draw">‚ë°„Éâ„É≠„Éº</button>
                    <button class="step-btn" id="step-mana">‚ë¢„Ç¢„É≥„Çø„ÉÉ„Éó</button>
                    <button class="step-btn" id="step-main">‚ë£„É°„Ç§„É≥</button>
                    <button class="step-btn" id="step-attack">‚ë§„Éê„Éà„É´</button>
                    <button class="step-btn" id="step-end">‚ë•„Çø„Éº„É≥ÁµÇ‰∫Ü</button>
                </div>
            </div>

            <div class="player-wrapper">
                <div class="board-and-hand-wrapper">
                    <div class="game-board">
                        <div class="zone mana-zone" id="mana-left">
                            <div class="zone-header">„Éû„Éä„Ç®„É™„Ç¢1</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone grave-zone" id="grave">
                            <div class="zone-header">Â¢ìÂú∞„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone special-zone-1" id="special1">
                            <div class="zone-header">ÁâπÊÆä„Ç®„É™„Ç¢1</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone battle-zone" id="battle">
                            <div class="zone-header">„Éê„Éà„É´„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone spell-zone" id="spell">
                            <div class="zone-header">„Çπ„Éö„É´„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone special-zone-2" id="special2">
                            <div class="zone-header">ÁâπÊÆä„Ç®„É™„Ç¢2</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone exclude-zone" id="exclude">
                            <div class="zone-header">Èô§Â§ñ„Ç®„É™„Ç¢</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="zone mana-zone" id="mana-right">
                            <div class="zone-header">„Éû„Éä„Ç®„É™„Ç¢2</div>
                            <div class="slot-container">
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                                <div class="card-slot"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hand-area-container">
                        <div class="hand-controls-top-wrapper">
                            
                            <div class="extra-area-wrapper">
                                <input type="text" class="extra-header-input" placeholder="„Çπ„ÉÜ„Éº„Çø„Çπ">
                                <div class="extra-grid">
                                    <div class="extra-column">
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                    </div>
                                    <div class="extra-column">
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                        <div class="extra-row"><input type="text" class="extra-text"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="zone extra-image-zone" id="extra-image-zone">
                                <div class="zone-header">„Éï„Ç£„Éº„É´„Éâ„Ç®„É™„Ç¢</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>

                            <div class="zone deck-zone side-deck-zone" id="side-deck">
                                <div class="zone-header">EX„Éá„ÉÉ„Ç≠</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>
                            <div class="hand-controls-frame">
                                <div class="hand-zone-wrapper">
                                    <div class="zone-header">ÊâãÊú≠</div>
                                    <div class="hand-zone-slots" id="hand-zone">
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                        <div class="card-slot"></div>
                                    </div>
                                </div>
                            
                                <div class="hand-buttons"> 
                                    <button class="draw-btn" id="draw-card">1„Éâ„É≠„Éº</button>
                                    <button class="draw-btn" id="draw-5-card">5„Éâ„É≠„Éº</button> 
                                    <button class="draw-btn" id="sm-toggle-btn" data-mode="simple">„Ç∑„É≥„Éó„É´</button>
                                    <button class="draw-btn" id="system-btn">„Ç∑„Çπ„ÉÜ„É†</button>
                                    <button class="draw-btn" id="surrender-btn">ÈôçÂèÇ</button>
                                </div>
                            </div>
                            
                            <div class="zone deck-zone" id="deck">
                                <div class="zone-header">„Éá„ÉÉ„Ç≠</div>
                                <div class="slot-container">
                                    <div class="card-slot"></div>
                                </div>
                            </div>

                            <div class="shortcut-guide fixed-orientation">
                                <div class="guide-title">„Ç≠„Éº„Ç¨„Ç§„Éâ</div>
                                <div id="key-guide-list">
                                    <ul>
                                        <li><span class="key">1-6</span> „Çπ„ÉÜ„ÉÉ„Éó</li>
                                        <li><span class="key">D</span> „Éâ„É≠„Éº</li>
                                        <li><span class="key">Q-R</span> „Ç®„É™„Ç¢</li>
                                        <li><span class="key">Space</span> ÈÄ≤„ÇÄ</li>
                                        <li><span class="key">T</span> „Çø„ÉÉ„Éó</li>
                                        <li><span class="key">F</span> ÂèçËª¢</li>
                                        <li><span class="key">Del</span> ÂâäÈô§</li>
                                        <li><span class="key">M</span> „É°„É¢Á∑®ÈõÜ</li>
                                        <li><span class="key">I/O</span> Ë≥Ω/Ë≤®</li>
                                        <li><span class="key">Ctrl+Z</span> ÂÖÉ„Å´Êàª„Åô</li>
                                        <li><span class="key">Ctrl+Y</span> „ÇÑ„ÇäÁõ¥„Åó</li>
                                        <li><span class="key">Tab</span> „Éâ„É≠„ÉØ„ÉºÈñãÈñâ</li>
                                        <li><span class="key">H</span> „Éä„Éì</li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        
        </div> 
    </div> 

    <script src="state.js"></script>
    <script src="script1.js"></script>
    
    <script src="ui-globals.js"></script>
    <script src="ui-utils.js"></script>
    <script src="ui-context-menu.js"></script>
    <script src="ui-modal-custom.js"></script>
    <script src="ui-battle.js"></script>
    <script src="ui-game-logic.js"></script>
    <script src="ui-main.js"></script>

    <script src="card.js"></script>
    <script src="zone.js"></script>
    <script src="board.js"></script>
    <script src="main.js"></script>

    <div id="custom-context-menu" class="custom-context-menu">
        <ul>
            <li id="context-menu-attack">„Ç¢„Çø„ÉÉ„ÇØ/ÊîªÊíÉ</li>
            <li id="context-menu-action">ÂäπÊûúÁô∫Âãï</li>
            <li id="context-menu-permanent">Â∏∏ÊôÇÁô∫Âãï</li>
            <li id="context-menu-target">ÂØæË±°„Å´Âèñ„Çã</li>
            
            <li class="has-submenu">
                „Ç´„Ç¶„É≥„Çø„ÉºÊìç‰Ωú ‚ñ∂
                <ul class="submenu">
                    <li id="context-menu-add-counter">„Ç´„Ç¶„É≥„Çø„Éº„Çí‰∏Ä„Å§ÁΩÆ„Åè</li>
                    <li id="context-menu-remove-counter">„Ç´„Ç¶„É≥„Çø„Éº„Çí‰∏Ä„Å§Âèñ„ÇäÈô§„Åè</li>
                    <li id="context-menu-custom-counter">„Ç´„Çπ„Çø„É†„Ç´„Ç¶„É≥„Çø„Éº</li>
                </ul>
            </li>

            <li class="has-submenu">
                BP„ÇíÂ¢óÊ∏õ„Åô„Çã ‚ñ∂
                <ul class="submenu">
                    <li class="bp-modify-btn" data-value="500">BP+500</li>
                    <li class="bp-modify-btn" data-value="1000">BP+1000</li>
                    <li class="bp-modify-btn" data-value="2000">BP+2000</li>
                    <li class="bp-modify-btn" data-value="-500">BP-500</li>
                    <li class="bp-modify-btn" data-value="-1000">BP-1000</li>
                    <li class="bp-modify-btn" data-value="-2000">BP-2000</li>
                    <li id="context-menu-reset-bp" class="bp-reset-btn" style="border-top: 1px solid #ccc; margin-top: 3px; padding-top: 3px; color: #d00;">ÂàùÊúüÂÄ§„Å´Êàª„Åô („É™„Çª„ÉÉ„Éà)</li>
                </ul>
            </li>

            <li class="has-submenu">
                „Ç´„Éº„Éâ„ÇíÂá¶ÁêÜ„Åô„Çã ‚ñ∂
                <ul class="submenu">
                    <li id="context-menu-to-grave">Â¢ìÂú∞„Å∏ÈÄÅ„Çã</li>
                    <li id="context-menu-to-exclude">Èô§Â§ñ„Åô„Çã</li>
                    <li id="context-menu-to-hand">ÊâãÊú≠„Å´Êàª„Åô</li>
                    <li id="context-menu-to-deck">„Éá„ÉÉ„Ç≠„Å´Êàª„Åô</li>
                    <li id="context-menu-to-side-deck">EX„Éá„ÉÉ„Ç≠„Å´Êàª„Åô</li>
                </ul>
            </li>

            <li id="context-menu-flip">„Ç´„Éº„Éâ„ÇíÂèçËª¢„Åï„Åõ„Çã</li>
            <li id="context-menu-change-style">„Çπ„Çø„Ç§„É´„ÅÆÂ§âÊõ¥</li>
            <li id="context-menu-memo">„É°„É¢Á∑®ÈõÜ</li>
            <li id="context-menu-view-illustration">„Ç§„É©„Çπ„Éà„ÇíË©≥Á¥∞„Å´Á¢∫Ë™ç„Åô„Çã</li>
            <li id="context-menu-add-flavor">„Éï„É¨„Éº„Éê„Éº„Ç§„É©„Çπ„ÉàÁ∑®ÈõÜ</li>
            <li id="context-menu-blocker">„Éñ„É≠„ÉÉ„Ç´„ÉºÂäπÊûú„Çí‰ªò‰∏é</li>
            <li id="context-menu-masturbate" style="display:none;">„Ç™„Éä„Éã„Éº„Åô„Çã</li>
            <li id="context-menu-export">„Ç´„Éº„Éâ„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà</li>
            <li id="context-menu-import">„Ç´„Éº„Éâ„Çí„Ç§„É≥„Éù„Éº„Éà</li>
            <li id="context-menu-duplicate">„Ç´„Éº„Éâ„ÇíË§áË£Ω</li>
            <li id="context-menu-delete">ÂâäÈô§</li>
            <li id="context-menu-set-as-top" style="display:none;">„Åì„ÅÆÁîªÂÉè„Å´Ë®≠ÂÆö„Åô„Çã</li>
            </ul>
    </div>
    
    <div id="memo-editor" class="memo-editor-modal">
        <div class="memo-editor-header" id="memo-editor-header">„É°„É¢Á∑®ÈõÜ</div>
        <textarea id="memo-editor-textarea" rows="5" placeholder="„Ç´„Éº„Éâ„É°„É¢..."></textarea>
        <div style="padding: 5px 15px; display: flex; gap: 10px; align-items: center; color: #ccc; font-size: 0.8em;">
            <span>ÊñáÂ≠ó„Çµ„Ç§„Ç∫: <input type="number" id="memo-font-size-input" class="lp-counter-input" style="width: 40px; font-size: 1em;" value="16"></span>
            <span>ÂπÖ: <input type="number" id="memo-width-input" class="lp-counter-input" style="width: 50px; font-size: 1em;" value="600"></span>
            <span>È´ò„Åï: <input type="number" id="memo-height-input" class="lp-counter-input" style="width: 50px; font-size: 1em;" value="600"></span>
        </div>
        <div class="memo-editor-buttons">
            <button id="memo-editor-save">‰øùÂ≠ò</button>
            <button id="memo-editor-cancel">„Ç≠„É£„É≥„Çª„É´</button>
        </div>
    </div>
    
    <div id="flavor-editor" class="flavor-editor-modal">
        <div class="flavor-editor-header" id="flavor-editor-header">„Éï„É¨„Éº„Éê„Éº„Ç§„É©„Çπ„ÉàË®≠ÂÆö</div>
        <div class="flavor-editor-content">
            <div class="flavor-slot-container">
                <div class="flavor-image-slot" id="flavor-slot-1">
                    <span class="flavor-slot-label">„Éï„É¨„Éº„Éê„Éº„Ç§„É©„Çπ„Éà ‚ë†</span>
                    <div class="flavor-image-preview" id="flavor-preview-1"></div>
                    <div class="flavor-controls">
                        <button class="flavor-upload-btn" id="flavor-upload-1">„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</button>
                        <button class="flavor-delete-btn" id="flavor-delete-1">ÂâäÈô§</button>
                    </div>
                    <div class="flavor-drop-zone" id="flavor-drop-zone-1">
                        „Åì„Åì„Å´‚ë†„ÅÆÁîªÂÉè„ÇíD&D<br>„Åæ„Åü„ÅØ„ÇØ„É™„ÉÉ„ÇØ
                    </div>
                </div>
                <div class="flavor-image-slot" id="flavor-slot-2">
                    <span class="flavor-slot-label">„Éï„É¨„Éº„Éê„Éº„Ç§„É©„Çπ„Éà ‚ë°</span>
                    <div class="flavor-image-preview" id="flavor-preview-2"></div>
                    <div class="flavor-controls">
                        <button class="flavor-upload-btn" id="flavor-upload-2">„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</button>
                        <button class="flavor-delete-btn" id="flavor-delete-2">ÂâäÈô§</button>
                    </div>
                    <div class="flavor-drop-zone" id="flavor-drop-zone-2">
                        „Åì„Åì„Å´‚ë°„ÅÆÁîªÂÉè„ÇíD&D<br>„Åæ„Åü„ÅØ„ÇØ„É™„ÉÉ„ÇØ
                    </div>
                </div>
            </div>
            </div>
        <div class="flavor-editor-buttons">
            <button id="flavor-editor-save-btn">‰øùÂ≠ò</button>
            <button id="flavor-editor-cancel">Èñâ„Åò„Çã</button>
        </div>
    </div>
    
    <div id="custom-counter-modal" class="custom-counter-modal">
        <div class="custom-counter-header">„Ç´„Çπ„Çø„É†„Ç´„Ç¶„É≥„Çø„ÉºÁÆ°ÁêÜ</div>
        <div class="custom-counter-content">
            <div class="counter-creation-area">
                <input type="text" id="new-counter-name" placeholder="„Ç´„Ç¶„É≥„Çø„ÉºÂêç (‰æã: ÊØí)" maxlength="10">
                <div id="new-counter-image-drop" class="flavor-drop-zone" style="height: 60px; font-size: 0.8em;">
                    ÁîªÂÉèD&D„Åæ„Åü„ÅØ„ÇØ„É™„ÉÉ„ÇØ
                </div>
                <button id="create-counter-btn" class="draw-btn" style="width: 100%; margin-top: 5px;">‰ΩúÊàê</button>
            </div>
            <div class="counter-list-area">
                <div class="area-label" style="color: #a0a0e0; margin-bottom: 5px;">ÁôªÈå≤Ê∏à„Åø„Ç´„Ç¶„É≥„Çø„Éº</div>
                <div id="custom-counter-list" class="custom-counter-list">
                    </div>
            </div>
        </div>
        <div class="custom-counter-footer">
            <button id="custom-counter-save-btn" class="draw-btn" style="margin-right: 10px;">‰øùÂ≠ò</button>
            <button id="custom-counter-close-btn" class="draw-btn">Èñâ„Åò„Çã</button>
        </div>
    </div>
    
    <div id="decoration-settings-modal" class="custom-counter-modal" style="display: none; width: 1000px; max-width: 95vw;">
        <div class="custom-counter-header" id="decoration-settings-header" style="display: flex; justify-content: space-between; align-items: center;">
            <span>Ë£ÖÈ£æÔºÜ„Ç¢„Ç§„Ç≥„É≥Ë®≠ÂÆö</span>
            <span class="drawer-close-hint" id="decoration-settings-close-btn">‚úï</span>
        </div>
        <div class="custom-counter-content" style="max-height: 70vh; overflow-y: auto;">
            
            <div class="decoration-settings-section">
                <div class="decoration-columns-container" style="display: flex; gap: 5px; flex-wrap: wrap;">
                    <div class="decoration-column" data-target-type="deck" data-owner="player">
                        <div class="column-header">„Éá„ÉÉ„Ç≠</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="side-deck" data-owner="player">
                        <div class="column-header">EX„Éá„ÉÉ„Ç≠</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="grave" data-owner="player">
                        <div class="column-header">Â¢ìÂú∞</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="exclude" data-owner="player">
                        <div class="column-header">Èô§Â§ñ</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="icon" data-owner="player">
                        <div class="column-header">„Ç¢„Ç§„Ç≥„É≥</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                </div>
            </div>

            <div class="decoration-settings-section" style="margin-top: 15px;">
                <div class="area-label" style="text-align: left; margin-bottom: 5px; border-bottom: 1px solid #555; padding-bottom: 2px;">Áõ∏Êâã</div>
                <div class="decoration-columns-container" style="display: flex; gap: 5px; flex-wrap: wrap;">
                    <div class="decoration-column" data-target-type="deck" data-owner="opponent">
                        <div class="column-header">„Éá„ÉÉ„Ç≠</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="side-deck" data-owner="opponent">
                        <div class="column-header">EX„Éá„ÉÉ„Ç≠</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="grave" data-owner="opponent">
                        <div class="column-header">Â¢ìÂú∞</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="exclude" data-owner="opponent">
                        <div class="column-header">Èô§Â§ñ</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                    <div class="decoration-column" data-target-type="icon" data-owner="opponent">
                        <div class="column-header">„Ç¢„Ç§„Ç≥„É≥</div>
                        <div class="decoration-drop-zone">ËøΩÂä†+</div>
                        <div class="decoration-stock-container"></div>
                    </div>
                </div>
            </div>

        </div>
        <div class="resize-handle" style="background: linear-gradient(135deg, transparent 50%, #888 50%);"></div>
    </div>
    
    <div id="battle-confirm-modal" class="custom-counter-modal" style="display: none; width: auto;">
        <div class="custom-counter-header" id="battle-confirm-header">„Éê„Éà„É´Á¢∫Ë™ç</div>
        <div class="custom-counter-content" style="flex-direction: row; justify-content: center; gap: 15px; align-items: center; padding: 15px 20px;">
            <div style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
                <span style="color: #ffcccc;">Attacker</span>
                <div id="battle-confirm-attacker-img" style="width: 100px; height: 140px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #555;"></div>
                <div style="display: flex; align-items: center; gap: 5px;">
                    <span>BP:</span>
                    <input type="text" id="battle-confirm-attacker-bp" class="lp-counter-input" style="width: 70px;">
                </div>
            </div>
            
            <div style="font-size: 2em; color: #ff4444; font-weight: bold;">VS</div>

            <div style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
                <span style="color: #ccccff;">Target</span>
                <div id="battle-confirm-target-img" style="width: 100px; height: 140px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #555;"></div>
                <div style="display: flex; align-items: center; gap: 5px;">
                    <span>BP:</span>
                    <input type="text" id="battle-confirm-target-bp" class="lp-counter-input" style="width: 70px;">
                </div>
            </div>
        </div>
        <div class="custom-counter-footer" style="display: flex; justify-content: space-between;">
            <button id="battle-confirm-cancel-btn" class="draw-btn" style="background-color: #666; color: white;">„Ç≠„É£„É≥„Çª„É´</button>
            <button id="battle-confirm-execute-btn" class="draw-btn" style="background-color: #cc0000; color: white;">„Éê„Éà„É´ÂÆüË°å</button>
        </div>
    </div>

    <div id="memo-tooltip" class="memo-tooltip"></div>
    
    <div id="lightbox-overlay" class="lightbox-overlay">
        <div id="lightbox-content" class="lightbox-content">
        </div>
    </div>
    
    <div id="game-result-overlay" class="game-result-overlay" style="display: none;">
        <div class="game-result-content">
            <div id="game-result-message" class="game-result-message">YOU WIN!</div>
            <button id="game-result-close-btn" class="draw-btn">Èñâ„Åò„Çã</button>
        </div>
    </div>
    
    <button class="drawer-toggle" id="opponent-drawer-toggle">O„Ç´„Éº„Éâ</button>
    <div class="drawer-wrapper" id="opponent-drawer">
        <div class="drawer-content">
            <div class="drawer-tabs">
                <button class="drawer-tab-btn active" data-target="opponent-deck-back-slots">„Éá„ÉÉ„Ç≠</button>
                <button class="drawer-tab-btn" data-target="opponent-grave-back-slots">Â¢ìÂú∞</button>
                <button class="drawer-tab-btn" data-target="opponent-exclude-back-slots">Èô§Â§ñ</button>
                <button class="drawer-tab-btn" data-target="opponent-side-deck-back-slots">EX</button>
            </div>
            <div class="drawer-main-area">
                <div class="drawer-tab-content">
                    <div class="drawer-panels">
                        <div class="sidebar-slot-area drawer-panel active" id="opponent-deck-back-slots">
                            <span class="area-label bottom-deck-label">„Éá„ÉÉ„Ç≠ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        <div class="sidebar-slot-area drawer-panel" id="opponent-grave-back-slots">
                            <span class="area-label bottom-deck-label">Â¢ìÂú∞ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        <div class="sidebar-slot-area drawer-panel" id="opponent-exclude-back-slots">
                            <span class="area-label bottom-deck-label">Èô§Â§ñÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        <div class="sidebar-slot-area drawer-panel" id="opponent-side-deck-back-slots">
                            <span class="area-label bottom-deck-label">EX„Éá„ÉÉ„Ç≠ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="drawer-free-space" id="opponent-free-space-slots">
                    <span class="area-label bottom-deck-label">„Éï„É™„Éº„Çπ„Éö„Éº„Çπ</span>
                    <div class="drawer-search-sort-container">
                        <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                        <div class="drawer-sort-buttons">
                            <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                            <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                            <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                        </div>
                    </div>
                    <div class="free-space-slot-container">
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                    </div>
                </div>
                <div class="drawer-token-space" id="opponent-token-zone-slots">
                    <span class="area-label bottom-deck-label">„Éà„Éº„ÇØ„É≥</span>
                    <div class="drawer-search-sort-container">
                        <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                        <div class="drawer-sort-buttons">
                            <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                            <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                            <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                        </div>
                    </div>
                    <div class="token-slot-container">
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                    </div>
                </div>
            </div> 
        </div> 
    </div>

    <button class="drawer-toggle" id="c-drawer-toggle">„Éê„É≥„ÇØ</button>
    <div class="drawer-wrapper" id="c-drawer">
        <div class="drawer-content">
            <div class="drawer-tabs">
                <button class="drawer-tab-btn active" data-target="c-bank-panel">„Ç´„Éº„Éâ„Éê„É≥„ÇØ</button>
                <button class="drawer-tab-btn" data-target="c-user-storage-panel">„É¶„Éº„Ç∂„Éº‰øùÁÆ°Â∫´</button>
                <button class="drawer-tab-btn" data-target="c-sample-storage-panel">„Çµ„É≥„Éó„É´„Éá„ÉÉ„Ç≠</button>
                <button class="drawer-tab-btn" data-target="c-io-panel">„Ç§„É≥„Éù„Éº„Éà/„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
            </div>
            <div class="drawer-main-area">
                <div class="drawer-tab-content">
                    <div class="drawer-panels">
                        <div class="drawer-panel active" id="c-bank-panel">
                            <div class="drawer-free-space" id="c-free-space">
                                <span class="area-label bottom-deck-label">„Éê„É≥„ÇØÂÜÖ</span>
                                <div class="drawer-search-sort-container">
                                    <input type="text" id="c-search-filter" class="drawer-search-input" placeholder="„É°„É¢Ê§úÁ¥¢...">
                                    <div class="drawer-sort-buttons">
                                        <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                        <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                        <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                    </div>
                                </div>
                                <div class="free-space-slot-container">
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                    <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                </div>
                            </div>
                        </div>

                        <div class="drawer-panel" id="c-user-storage-panel">
                            <div style="flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column;">
                                <div style="padding: 5px 10px; font-weight: bold; color: #8abda0; background-color: rgba(0,0,0,0.2);">„É¶„Éº„Ç∂„Éº‰øùÁÆ°Â∫´</div>
                                <div class="storage-grid-container" id="deck-storage-container" style="flex-shrink: 0;"></div>
                            </div>
                        </div>

                        <div class="drawer-panel" id="c-sample-storage-panel">
                            <div style="flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column;">
                                <div style="padding: 5px 10px; font-weight: bold; color: #8abda0; background-color: rgba(0,0,0,0.2);">„Çµ„É≥„Éó„É´„Éá„ÉÉ„Ç≠</div>
                                <div class="storage-grid-container" id="sample-deck-container" style="flex-shrink: 0; min-height: 200px;"></div>
                            </div>
                        </div>

                        <div class="drawer-panel" id="c-io-panel">
                            <div style="padding: 10px; height: 100%; display: flex; flex-direction: column; align-items: center;">
                                <div style="margin-bottom: 10px; font-weight: bold; color: #8abda0; text-align: center; width: 100%;">„Éï„Ç°„Ç§„É´Êìç‰Ωú (JSON)</div>
                                <div style="display: flex; gap: 15px; flex-direction: row; justify-content: center; width: 100%;">
                                    
                                    <div style="border: 1px solid #2f5f4f; padding: 10px; border-radius: 5px; background-color: rgba(0,0,0,0.2); width: 200px; flex-shrink: 0;">
                                        <div style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 5px;">Ëá™ÂàÜ (Player)</div>
                                        <div style="display: flex; gap: 5px;">
                                            <button class="draw-btn" id="import-deck-btn" style="flex: 1; padding: 5px;">Ë™≠Ëæº</button>
                                            <button class="draw-btn" id="export-deck-btn" style="flex: 1; padding: 5px;">‰øùÂ≠ò</button>
                                        </div>
                                    </div>
                                    
                                    <div style="border: 1px solid #2f5f4f; padding: 10px; border-radius: 5px; background-color: rgba(0,0,0,0.2); width: 200px; flex-shrink: 0;">
                                        <div style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 5px;">Áõ∏Êâã (Opponent)</div>
                                        <div style="display: flex; gap: 5px;">
                                            <button class="draw-btn" id="opponent-import-deck-btn" style="flex: 1; padding: 5px;">Ë™≠Ëæº</button>
                                            <button class="draw-btn" id="opponent-export-deck-btn" style="flex: 1; padding: 5px;">‰øùÂ≠ò</button>
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top: 15px; font-size: 0.8em; color: #aaa; padding: 5px; text-align: center; max-width: 500px;">
                                    ‚Äª „Éá„ÉÉ„Ç≠„ÄÅEX„Éá„ÉÉ„Ç≠„ÄÅ„Éï„É™„Éº„Çπ„Éö„Éº„Çπ„ÄÅ„Éà„Éº„ÇØ„É≥„ÅÆÁä∂ÊÖã„ÇíJSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶‰øùÂ≠ò„ÉªË™≠„ÅøËæº„Åø„Åó„Åæ„Åô„ÄÇ
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="drawer-toggle" id="player-drawer-toggle">P„Ç´„Éº„Éâ</button>
    <div class="drawer-wrapper" id="player-drawer">
        <div class="drawer-content">
            
            <div class="drawer-tabs">
                <button class="drawer-tab-btn active" data-target="deck-back-slots">„Éá„ÉÉ„Ç≠</button>
                <button class="drawer-tab-btn" data-target="grave-back-slots">Â¢ìÂú∞</button>
                <button class="drawer-tab-btn" data-target="exclude-back-slots">Èô§Â§ñ</button>
                <button class="drawer-tab-btn" data-target="side-deck-back-slots">EX</button>
            </div>
            
            <div class="drawer-main-area">
                
                <div class="drawer-tab-content"> 
                    <div class="drawer-panels">
                        
                        <div class="sidebar-slot-area drawer-panel active" id="deck-back-slots">
                            <span class="area-label bottom-deck-label">„Éá„ÉÉ„Ç≠ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="sidebar-slot-area drawer-panel" id="grave-back-slots">
                            <span class="area-label bottom-deck-label">Â¢ìÂú∞ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        
                        <div class="sidebar-slot-area drawer-panel" id="exclude-back-slots">
                            <span class="area-label bottom-deck-label">Èô§Â§ñÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>

                        <div class="sidebar-slot-area drawer-panel" id="side-deck-back-slots">
                            <span class="area-label bottom-deck-label">EX„Éá„ÉÉ„Ç≠ÂÜÖ</span>
                            <div class="drawer-search-sort-container">
                                <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                                <div class="drawer-sort-buttons">
                                    <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                                    <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                                    <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                                </div>
                            </div>
                            <div class="deck-back-slot-container">
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                                <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                            </div>
                        </div>
                        
                    </div> 
                </div> 
                <div class="drawer-free-space" id="free-space-slots"> 
                    <span class="area-label bottom-deck-label">„Éï„É™„Éº„Çπ„Éö„Éº„Çπ</span>
                    <div class="drawer-search-sort-container">
                        <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                        <div class="drawer-sort-buttons">
                            <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                            <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                            <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                        </div>
                    </div>
                    <div class="free-space-slot-container">
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                    </div>
                </div> 
                <div class="drawer-token-space" id="token-zone-slots">
                    <span class="area-label bottom-deck-label">„Éà„Éº„ÇØ„É≥</span>
                    <div class="drawer-search-sort-container">
                        <input type="text" class="drawer-search-input" placeholder="ÂêçÂâç/„É°„É¢„ÅßÊ§úÁ¥¢...">
                        <div class="drawer-sort-buttons">
                            <button class="sort-btn" data-sort="name">ÂêçÂâçÈ†Ü</button>
                            <button class="sort-btn" data-sort="cost">„Éû„ÉäÈ†Ü</button>
                            <button class="sort-btn" data-sort="bp">BPÈ†Ü</button>
                        </div>
                    </div>
                    <div class="token-slot-container">
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                        <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div> <div class="card-slot"></div>
                    </div>
                </div>
            </div> 
        </div> 
    </div>

    <div class="drawer-wrapper" id="common-drawer">
        <div class="drawer-header" id="common-drawer-header">
            <span>ÂÖ±ÈÄö„É°„Éã„É•„Éº</span>
            <span class="drawer-close-hint">‚úï</span>
        </div>
        <div class="drawer-content">
            <div class="drawer-tabs">
                <button class="drawer-tab-btn active" data-target="common-general-panel">ÂÖ®Ëà¨</button>
                <button class="drawer-tab-btn" data-target="common-player-panel">Ëá™ÂàÜ(P)</button>
                <button class="drawer-tab-btn" data-target="common-opponent-panel">Áõ∏Êâã(O)</button>
                <button class="drawer-tab-btn" data-target="common-settings-panel">Ë®≠ÂÆö(BGM/SE)</button>
                <button class="drawer-tab-btn" data-target="common-auto-config-panel">Ë®≠ÂÆö2(Ëá™ÂãïÂá¶ÁêÜ)</button>
                <button class="drawer-tab-btn" data-target="common-spec-panel">Ê©üËÉΩË™¨Êòé</button>
                <button class="drawer-tab-btn" data-target="common-about-panel">SÔºÜM„Å®„ÅØ</button>
                <button class="drawer-tab-btn" data-target="common-credit-panel">„ÇØ„É¨„Ç∏„ÉÉ„Éà</button>
            </div>

            <div class="drawer-main-area">
                <div class="drawer-tab-content">
                    <div class="drawer-panels">

                        <div class="drawer-panel active" id="common-general-panel">
                            <div class="drawer-common-controls">
                                
                                <div class="common-control-group">
                                    <span class="area-label">Ë°®Á§∫„Éª„Ç∑„Çπ„ÉÜ„É†</span>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="common-flip-board-btn">Áõ§Èù¢ÂèçËª¢</button>
                                        <button class="draw-btn" id="common-decoration-settings-btn">Ë£ÖÈ£æÔºÜ„Ç¢„Ç§„Ç≥„É≥Ë®≠ÂÆö</button>
                                        <button class="draw-btn" id="common-toggle-nav-btn">„Éä„ÉìÈùûË°®Á§∫</button>
                                    </div>
                                </div>
                                
                                <div class="common-control-group">
                                    <span class="area-label">„Ç¶„Ç£„É≥„Éâ„Ç¶Êìç‰Ωú</span>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="common-open-player-drawer">Ëá™ÂàÜ(P)</button>
                                        <button class="draw-btn" id="common-open-opponent-drawer">Áõ∏Êâã(O)</button>
                                        <button class="draw-btn" id="common-open-bank-drawer">„Éê„É≥„ÇØ</button>
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">‰øùÂ≠ò„ÉªË™≠Ëæº</span>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="common-export-board-btn">ÂÖ®„Å¶„Çí‰øùÂ≠ò</button>
                                        <button class="draw-btn" id="common-import-board-btn">Ë™≠Ëæº</button>
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">„É™„Éó„É¨„Ç§</span>
                                    <div id="replay-file-name-display" style="font-size: 0.8em; color: #ccc; margin-bottom: 5px; display: none;">
                                        Ë™≠Ëæº‰∏≠: <span id="replay-file-name-text"></span>
                                    </div>
                                    <div style="margin-bottom: 5px; color: #ccc; font-size: 0.9em;">
                                        ÂæÖÊ©üÊôÇÈñì: <input type="number" id="replay-wait-time-input" class="lp-counter-input" style="width: 50px; font-size: 0.9em; padding: 2px;" min="0" step="0.1" value="2"> Áßí <br>(Á©∫Ê¨Ñ:Ë®òÈå≤ÈÄö„Çä)
                                    </div>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="record-start-btn">Ë®òÈå≤ÈñãÂßã</button>
                                        <button class="draw-btn" id="record-stop-btn" style="display:none;">Ë®òÈå≤ÁµÇ‰∫Ü(‰øùÂ≠ò)</button>
                                        
                                        <button class="draw-btn" id="replay-play-btn">ÂÜçÁîü</button>
                                        <button class="draw-btn" id="replay-pause-btn" style="display:none;">‰∏ÄÊôÇÂÅúÊ≠¢</button>
                                        <button class="draw-btn" id="replay-stop-btn" style="display:none;">ÂÅúÊ≠¢</button>
                                        
                                        <button class="draw-btn" id="load-replay-btn">Ë™≠Ëæº</button>
                                    </div>
                                </div>

                                <div class="hand-counter-group" id="random-group">
                                    <span class="area-label">„É©„É≥„ÉÄ„É†</span>
                                    <div class="random-result-display" id="random-result">...</div>
                                    <div class="random-buttons">
                                        <button class="counter-btn" id="dice-roll-btn">„ÉÄ„Ç§„Çπ</button>
                                        <button class="counter-btn" id="coin-toss-btn">„Ç≥„Ç§„É≥</button>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="drawer-panel" id="common-player-panel">
                            <div class="drawer-common-controls">
                                
                                <div class="common-control-group">
                                    <span class="area-label">Ëá™ÂãïÊ∏õÂ∞ë(P)</span>
                                    <div style="margin-bottom: 5px; color: #ccc; font-size: 0.9em;">
                                        ÈñìÈöî: <input type="number" id="player-auto-decrease-interval" class="lp-counter-input" style="width: 50px; font-size: 0.9em; padding: 2px;" min="0.1" step="0.1" value="1"> Áßí
                                    </div>
                                    <div class="common-control-buttons">
                                        <button class="counter-btn" id="lp-auto-decrease-btn">LPËá™ÂãïÊ∏õÂ∞ë</button>
                                        <button class="counter-btn" id="mana-auto-decrease-btn">„Éû„ÉäËá™ÂãïÊ∏õÂ∞ë</button>
                                        <button class="counter-btn" id="hyphen-auto-decrease-btn">‚óè‚óèËá™ÂãïÊ∏õÂ∞ë</button>
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">ÂÖ®‰ΩìÊìç‰Ωú(P)</span>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="shuffle-deck">„Éá„ÉÉ„Ç≠„Ç∑„É£„ÉÉ„Éï„É´</button>
                                        <button class="draw-btn" id="shuffle-hand">ÊâãÊú≠„Ç∑„É£„ÉÉ„Éï„É´</button>
                                        <button class="draw-btn" id="reset-and-draw">„É™„Çª„ÉÉ„Éà</button>
                                        <button class="draw-btn" id="delete-deck-btn">„Éá„ÉÉ„Ç≠ÂâäÈô§</button>
                                    </div>
                                </div>
                                
                            </div>
                        </div>

                        <div class="drawer-panel" id="common-opponent-panel">
                            <div class="drawer-common-controls">
                                
                                <div class="common-control-group">
                                    <span class="area-label">Ëá™ÂãïÊ∏õÂ∞ë(O)</span>
                                    <div style="margin-bottom: 5px; color: #ccc; font-size: 0.9em;">
                                        ÈñìÈöî: <input type="number" id="opponent-auto-decrease-interval" class="lp-counter-input" style="width: 50px; font-size: 0.9em; padding: 2px;" min="0.1" step="0.1" value="1"> Áßí
                                    </div>
                                    <div class="common-control-buttons">
                                        <button class="counter-btn" id="opponent-lp-auto-decrease-btn">LPËá™ÂãïÊ∏õÂ∞ë</button>
                                        <button class="counter-btn" id="opponent-mana-auto-decrease-btn">„Éû„ÉäËá™ÂãïÊ∏õÂ∞ë</button>
                                        <button class="counter-btn" id="opponent-hyphen-auto-decrease-btn">‚óè‚óèËá™ÂãïÊ∏õÂ∞ë</button>
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">ÂÖ®‰ΩìÊìç‰Ωú(O)</span>
                                    <div class="common-control-buttons">
                                        <button class="draw-btn" id="opponent-shuffle-deck">„Éá„ÉÉ„Ç≠„Ç∑„É£„ÉÉ„Éï„É´</button>
                                        <button class="draw-btn" id="opponent-shuffle-hand">ÊâãÊú≠„Ç∑„É£„ÉÉ„Éï„É´</button>
                                        <button class="draw-btn" id="opponent-reset-and-draw">„É™„Çª„ÉÉ„Éà</button>
                                        <button class="draw-btn" id="opponent-delete-deck-btn">„Éá„ÉÉ„Ç≠ÂâäÈô§</button>
                                    </div>
                                </div>
                                
                            </div>
                        </div>

                        <div class="drawer-panel" id="common-settings-panel">
                            <div class="drawer-common-controls">
                                
                                <div class="audio-settings-row">
                                    <div class="common-control-group">
                                        <span class="area-label">BGMË®≠ÂÆö</span>
                                        <div style="display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%;">
                                            
                                            <div style="display: flex; align-items: center; gap: 5px; width: 100%;">
                                                <select id="bgm-select" class="bgm-select" style="flex-grow: 1; padding: 5px;">
                                                    <option value="">-- BGMÈÅ∏Êäû --</option>
                                                </select>
                                                
                                                <div class="common-control-buttons" style="flex-shrink: 0;">
                                                    <button class="draw-btn" id="bgm-play-btn">ÂÜçÁîü</button>
                                                    <button class="draw-btn" id="bgm-pause-btn" style="display:none;">‰∏ÄÊôÇÂÅúÊ≠¢</button>
                                                    <button class="draw-btn" id="bgm-stop-btn">ÂÅúÊ≠¢</button>
                                                </div>
                                            </div>

                                            <div style="display: flex; align-items: center; gap: 5px; color: #ccc;">
                                                <span>Èü≥Èáè:</span>
                                                <input type="range" id="bgm-volume-slider" min="0" max="10" value="5" style="width: 100px;">
                                                <span id="bgm-volume-val">5</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="common-control-group">
                                        <span class="area-label">SEË®≠ÂÆö</span>
                                        <div style="display: flex; align-items: center; gap: 5px; color: #ccc; margin-top: 20px;">
                                            <span>Èü≥Èáè:</span>
                                            <input type="range" id="se-volume-slider" min="0" max="10" value="5" style="width: 100px;">
                                            <span id="se-volume-val">5</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="common-control-group">
                                    <span class="area-label">SEÂÄãÂà•Ë®≠ÂÆö</span>
                                    <div style="display: flex; gap: 10px; margin-bottom: 5px; justify-content: center;">
                                        <button class="draw-btn" id="se-check-all">ÂÖ®ÈÅ∏Êäû</button>
                                        <button class="draw-btn" id="se-uncheck-all">ÂÖ®Ëß£Èô§</button>
                                    </div>
                                    <div id="se-settings-container" class="settings-checkbox-list">
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">„Ç®„Éï„Çß„ÇØ„ÉàÂÄãÂà•Ë®≠ÂÆö</span>
                                    <div style="display: flex; gap: 10px; margin-bottom: 5px; justify-content: center;">
                                        <button class="draw-btn" id="effect-check-all">ÂÖ®ÈÅ∏Êäû</button>
                                        <button class="draw-btn" id="effect-uncheck-all">ÂÖ®Ëß£Èô§</button>
                                    </div>
                                    <div id="effect-settings-container" class="settings-checkbox-list">
                                    </div>
                                </div>

                                <div class="common-control-group">
                                    <span class="area-label">„Ç≠„Éº„Ç≥„É≥„Éï„Ç£„Ç∞</span>
                                    <div id="key-config-container" class="settings-checkbox-list" style="max-height: 200px;">
                                        </div>
                                </div>

                            </div>
                        </div>

                        <div class="drawer-panel" id="common-auto-config-panel">
                             <div class="drawer-common-controls">
                                <div class="common-control-group">
                                    <span class="area-label">Ëá™ÂãïÂá¶ÁêÜË®≠ÂÆö</span>
                                    <div style="display: flex; gap: 10px; margin-bottom: 5px; justify-content: center;">
                                        <button class="draw-btn" id="auto-check-all">ÂÖ®ÈÅ∏Êäû</button>
                                        <button class="draw-btn" id="auto-uncheck-all">ÂÖ®Ëß£Èô§</button>
                                    </div>
                                    <div id="auto-config-container" class="settings-checkbox-list">
                                        </div>
                                </div>
                                <div class="common-control-group">
                                    <span class="area-label">„Éá„É•„Ç®„É´„Éª„Çø„Ç§„Éû„ÉºË®≠ÂÆö</span>
                                    <div class="settings-checkbox-list" id="duel-settings-container" style="height: auto; max-height: none;">
                                         <label><input type="checkbox" id="setting-duel-reset" checked=""> ÈñãÂßãÊôÇ„É™„Çª„ÉÉ„Éà</label>
                                         <label><input type="checkbox" id="setting-duel-shuffle" checked=""> ÈñãÂßãÊôÇ„Ç∑„É£„ÉÉ„Éï„É´</label>
                                         <label><input type="checkbox" id="setting-duel-draw" checked=""> ÈñãÂßãÊôÇ5„Éâ„É≠„Éº</label>
                                         <label style="display: none;"><input type="checkbox" id="setting-auto-flip" checked=""> ÂÖàË°åÊôÇÁõ§Èù¢ÂèçËª¢</label>
                                         <label><input type="checkbox" id="setting-auto-phase-timeout"> „Çø„Ç§„É†„Ç¢„Ç¶„ÉàÊôÇ„ÄÅËá™Âãï„Åß„Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å</label>
                                    </div>
                                    <div style="margin-top: 5px; color: #ccc; font-size: 0.9em; display: flex; align-items: center; gap: 5px;">
                                        <span>Âà∂ÈôêÊôÇÈñì:</span>
                                        <input type="number" id="setting-timer-duration" class="lp-counter-input" style="width: 50px; font-size: 0.9em; padding: 2px;" value="180"> Áßí
                                    </div>
                                </div>
                             </div>
                        </div>

                        <div class="drawer-panel" id="common-spec-panel">
                            <div class="text-content-area" id="spec-text-content">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                        </div>
                        
                        <div class="drawer-panel" id="common-about-panel">
                            <div class="text-content-area" id="about-text-content">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                        </div>
                        
                        <div class="drawer-panel" id="common-credit-panel">
                            <div class="text-content-area" id="credit-text-content">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="resize-handle"></div>
    </div>

    <div id="battle-target-overlay" class="battle-overlay" style="display: none;">
        <div class="battle-message-container">
            <div class="battle-message">ÊîªÊíÉÂØæË±°„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
            <button id="battle-cancel-btn" class="draw-btn" style="background-color: #cc0000; color: white; padding: 10px 20px; font-size: 1.2em;">„Ç≠„É£„É≥„Çª„É´</button>
        </div>
    </div>

    <div id="cost-warning-tooltip" class="memo-tooltip" style="display: none; color: #ff4444; border-color: #ff4444; z-index: 10000; text-align: center; background-color: rgba(0,0,0,0.8);">„Éû„Éä‰∏çË∂≥</div>
    
    <div id="phase-cutin-overlay" class="game-result-overlay" style="display: none; background-color: transparent; pointer-events: none; justify-content: center; align-items: center;">
        <div id="phase-cutin-text" style="font-size: 4em; font-weight: bold; color: #fff; text-shadow: 0 0 10px #000, 0 0 20px #ff00ff; opacity: 0; transform: translateX(100vw);"></div>
    </div>

    <div id="system-modal" class="custom-counter-modal" style="display: none; z-index: 20000; min-width: 350px; max-width: 90vw;">
        <div class="custom-counter-header" id="system-modal-header">ÈÄöÁü•</div>
        <div class="custom-counter-content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
            <div id="system-modal-message" style="white-space: pre-wrap; line-height: 1.5; font-size: 1.1em; text-align: center;"></div>
            
            <div id="system-modal-prompt-container" style="display: none;">
                <input type="text" id="system-modal-input" class="player-name-input" style="width: 100%; text-align: left; padding: 8px;" autocomplete="off">
            </div>

            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 10px;">
                <button id="system-modal-ok-btn" class="draw-btn" style="min-width: 100px; padding: 8px;">OK</button>
                <button id="system-modal-cancel-btn" class="draw-btn" style="min-width: 100px; padding: 8px; background-color: #666; color: #fff; display: none;">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

</body>
</html>